"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e,r,n=require("react"),o=(e=require("invariant"))&&"object"==typeof e&&"default"in e?e.default:e,t="undefined"!=typeof document,i="undefined"!=typeof document;exports.useGoogleMapsScript=function(e){var a=e.id,s=void 0===a?"script-loader":a,u=e.version,c=void 0===u?"weekly":u,l=e.nonce,p=e.googleMapsApiKey,d=e.googleMapsClientId,f=e.language,g=e.region,h=e.libraries,v=e.channel,m=e.mapIds,w=n.useRef(!1),y=n.useState(!1),b=y[0],M=y[1],j=n.useState(void 0),E=j[0],I=j[1];n.useEffect((function(){return w.current=!0,function(){w.current=!1}}),[]),n.useEffect((function(){b&&(window.google||o(!1))}),[b]);var k=function(e){var r=e.googleMapsApiKey,n=e.googleMapsClientId,t=e.version,i=void 0===t?"weekly":t,a=e.language,s=e.region,u=e.libraries,c=e.channel,l=e.mapIds,p=[];return r&&n||!r||!n||o(!1),r?p.push("key="+r):n&&p.push("client="+n),i&&p.push("v="+i),a&&p.push("language="+a),s&&p.push("region="+s),u&&u.length&&p.push("libraries="+u.sort().join(",")),c&&p.push("channel="+c),l&&l.length&&p.push("map_ids="+l.join(",")),p.push("callback=initMap"),"https://maps.googleapis.com/maps/api/js?"+p.join("&")}({version:c,googleMapsApiKey:p,googleMapsClientId:d,language:f,region:g,libraries:h,channel:v,mapIds:m});n.useEffect((function(){function e(){w.current&&(M(!0),r=k)}t&&(window.google&&window.google.maps&&r===k?e():function(e){var r=e.url,n=e.id,o=e.nonce;return i?new Promise((function(e,t){var i=document.getElementById(n),a=window;if(i){var s=i.getAttribute("data-state");if(i.src===r&&"error"!==s){if("ready"===s)return e(n);var u=a.initMap,c=i.onerror;return a.initMap=function(){u&&u(),e(n)},void(i.onerror=function(e){c&&c(e),t(e)})}i.remove()}var l=document.createElement("script");l.type="text/javascript",l.src=r,l.id=n,l.async=!0,l.nonce=o,l.onerror=function(e){l.setAttribute("data-state","error"),t(e)},a.initMap=function(){l.setAttribute("data-state","ready"),e(n)},document.head.appendChild(l)})).catch((function(e){throw console.error("injectScript error: ",e),e})):Promise.reject(new Error("document is undefined"))}({id:s,url:k,nonce:l}).then(e).catch((function(e){w.current&&I(e),console.warn("\n        There has been an Error with loading Google Maps API script, please check that you provided correct google API key ("+(p||"-")+") or Client ID ("+(d||"-")+")\n        Otherwise it is a Network issue.\n      "),console.error(e)})))}),[s,k,l]);var A=n.useRef();return n.useEffect((function(){A.current&&h!==A.current&&console.warn("Performance warning! LoadScript has been reloaded unintentionally! You should not pass `libraries` prop as new array. Please keep an array of libraries as static class property for Components and PureComponents, or just a const variable outside of component, or somewhere in config files or ENV variables"),A.current=h}),[h]),{isLoaded:b,loadError:E,url:k}};
//# sourceMappingURL=use-google-maps-script.cjs.production.min.js.map
