{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\Windows\\\\Desktop\\\\housestreetcourse\\\\house-course\\\\src\\\\components\\\\searchBox.tsx\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport usePlacesAutocomplete, { getGeocode, getLatLng } from \"use-places-autocomplete\";\nimport { useGoogleMapsScript } from \"use-google-maps-script\";\nimport { Combobox, ComboboxInput, ComboboxPopover, ComboboxList, ComboboxOption } from \"@reach/combobox\";\nimport \"@reach/combobox/styles.css\";\nvar libraries = [\"places\"];\nexport function SearchBox(_ref) {\n  _s();\n\n  var _process$env$NEXT_PUB;\n\n  var onSelectAddress = _ref.onSelectAddress,\n      defaultValue = _ref.defaultValue;\n\n  var _useGoogleMapsScript = useGoogleMapsScript({\n    googleMapsApiKey: (_process$env$NEXT_PUB = process.env.NEXT_PUBLIC_FIREBASE_API_KEY) !== null && _process$env$NEXT_PUB !== void 0 ? _process$env$NEXT_PUB : \"\",\n    libraries: libraries\n  }),\n      isLoaded = _useGoogleMapsScript.isLoaded,\n      loadError = _useGoogleMapsScript.loadError;\n\n  if (!isLoaded) return null;\n  if (loadError) return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: \"Error loading\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 35,\n    columnNumber: 25\n  }, this);\n  return /*#__PURE__*/_jsxDEV(ReadySearchBox, {\n    onSelectAddress: onSelectAddress,\n    defaultValue: defaultValue\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 38,\n    columnNumber: 5\n  }, this);\n}\n\n_s(SearchBox, \"n9fctMqTGXbfytR9Dpz56p0kZZk=\", false, function () {\n  return [useGoogleMapsScript];\n});\n\n_c = SearchBox;\n\nfunction ReadySearchBox(_ref2) {\n  _s2();\n\n  var _this = this;\n\n  var onSelectAddress = _ref2.onSelectAddress,\n      defaultValue = _ref2.defaultValue;\n\n  var _usePlacesAutocomplet = usePlacesAutocomplete({\n    debounce: 300,\n    defaultValue: defaultValue\n  }),\n      ready = _usePlacesAutocomplet.ready,\n      value = _usePlacesAutocomplet.value,\n      setValue = _usePlacesAutocomplet.setValue,\n      _usePlacesAutocomplet2 = _usePlacesAutocomplet.suggestions,\n      status = _usePlacesAutocomplet2.status,\n      data = _usePlacesAutocomplet2.data,\n      clearSuggestions = _usePlacesAutocomplet.clearSuggestions;\n\n  var handleChange = function handleChange(e) {\n    setValue(e.target.value);\n\n    if (e.target.value === \"\") {\n      onSelectAddress(\"\", null, null);\n    }\n  };\n\n  var handleSelect = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(address) {\n      var results, _yield$getLatLng, lat, lng;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              setValue(address, false);\n              clearSuggestions();\n              _context.prev = 2;\n              _context.next = 5;\n              return getGeocode({\n                address: address\n              });\n\n            case 5:\n              results = _context.sent;\n              _context.next = 8;\n              return getLatLng(results[0]);\n\n            case 8:\n              _yield$getLatLng = _context.sent;\n              lat = _yield$getLatLng.lat;\n              lng = _yield$getLatLng.lng;\n              onSelectAddress(address, lat, lng);\n              _context.next = 17;\n              break;\n\n            case 14:\n              _context.prev = 14;\n              _context.t0 = _context[\"catch\"](2);\n              console.error(\"\\uD83D\\uDE31 Error:\", _context.t0);\n\n            case 17:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[2, 14]]);\n    }));\n\n    return function handleSelect(_x) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  return /*#__PURE__*/_jsxDEV(Combobox, {\n    onSelect: handleSelect,\n    children: [/*#__PURE__*/_jsxDEV(ComboboxInput, {\n      id: \"search\",\n      value: value,\n      onChange: handleChange,\n      disabled: !ready,\n      placeholder: \"Search your location\",\n      className: \"w-full p-2\",\n      autoComplete: \"off\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ComboboxPopover, {\n      children: /*#__PURE__*/_jsxDEV(ComboboxList, {\n        children: status === \"OK\" && data.map(function (_ref4) {\n          var place_id = _ref4.place_id,\n              description = _ref4.description;\n          return /*#__PURE__*/_jsxDEV(ComboboxOption, {\n            value: description\n          }, place_id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 89,\n            columnNumber: 15\n          }, _this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 75,\n    columnNumber: 5\n  }, this);\n}\n\n_s2(ReadySearchBox, \"VYk15tlxiXLVJywwctl4rg+HLak=\", false, function () {\n  return [usePlacesAutocomplete];\n});\n\n_c2 = ReadySearchBox;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"SearchBox\");\n$RefreshReg$(_c2, \"ReadySearchBox\");","map":{"version":3,"sources":["C:/Users/Windows/Desktop/housestreetcourse/house-course/src/components/searchBox.tsx"],"names":["usePlacesAutocomplete","getGeocode","getLatLng","useGoogleMapsScript","Combobox","ComboboxInput","ComboboxPopover","ComboboxList","ComboboxOption","libraries","SearchBox","onSelectAddress","defaultValue","googleMapsApiKey","process","env","NEXT_PUBLIC_FIREBASE_API_KEY","isLoaded","loadError","ReadySearchBox","debounce","ready","value","setValue","suggestions","status","data","clearSuggestions","handleChange","e","target","handleSelect","address","results","lat","lng","console","error","map","place_id","description"],"mappings":"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","sourcesContent":["import { ChangeEvent } from \"react\";\r\nimport { FunctionComponent } from \"react\";\r\nimport usePlacesAutocomplete, {\r\n  getGeocode,\r\n  getLatLng,\r\n} from \"use-places-autocomplete\";\r\nimport { useGoogleMapsScript, Libraries } from \"use-google-maps-script\";\r\nimport {\r\n  Combobox,\r\n  ComboboxInput,\r\n  ComboboxPopover,\r\n  ComboboxList,\r\n  ComboboxOption,\r\n} from \"@reach/combobox\";\r\nimport \"@reach/combobox/styles.css\";\r\n\r\ninterface ISearchBoxProps {\r\n  onSelectAddress: (\r\n    address: string,\r\n    latitude: number | null,\r\n    longitude: number | null\r\n  ) => void;\r\n  defaultValue: string;\r\n}\r\n\r\nconst libraries: Libraries = [\"places\"];\r\n\r\nexport function SearchBox({ onSelectAddress, defaultValue }: ISearchBoxProps) {\r\n  const { isLoaded, loadError } = useGoogleMapsScript({\r\n    googleMapsApiKey: process.env.NEXT_PUBLIC_FIREBASE_API_KEY ?? \"\",\r\n    libraries,\r\n  });\r\n\r\n  if (!isLoaded) return null;\r\n  if (loadError) return <div>Error loading</div>;\r\n\r\n  return (\r\n    <ReadySearchBox\r\n      onSelectAddress={onSelectAddress}\r\n      defaultValue={defaultValue}\r\n    />\r\n  );\r\n}\r\n\r\nfunction ReadySearchBox({ onSelectAddress, defaultValue }: ISearchBoxProps) {\r\n  const {\r\n    ready,\r\n    value,\r\n    setValue,\r\n    suggestions: { status, data },\r\n    clearSuggestions,\r\n  } = usePlacesAutocomplete({ debounce: 300, defaultValue });\r\n\r\n  const handleChange = (e: ChangeEvent<HTMLInputElement>) => {\r\n    setValue(e.target.value);\r\n    if (e.target.value === \"\") {\r\n      onSelectAddress(\"\", null, null);\r\n    }\r\n  };\r\n\r\n  const handleSelect = async (address: string) => {\r\n    setValue(address, false);\r\n    clearSuggestions();\r\n\r\n    try {\r\n      const results = await getGeocode({ address });\r\n      const { lat, lng } = await getLatLng(results[0]);\r\n      onSelectAddress(address, lat, lng);\r\n    } catch (error) {\r\n      console.error(`😱 Error:`, error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Combobox onSelect={handleSelect}>\r\n      <ComboboxInput\r\n        id=\"search\"\r\n        value={value}\r\n        onChange={handleChange}\r\n        disabled={!ready}\r\n        placeholder=\"Search your location\"\r\n        className=\"w-full p-2\"\r\n        autoComplete=\"off\"\r\n      />\r\n      <ComboboxPopover>\r\n        <ComboboxList>\r\n          {status === \"OK\" &&\r\n            data.map(({ place_id, description }) => (\r\n              <ComboboxOption key={place_id} value={description} />\r\n            ))}\r\n        </ComboboxList>\r\n      </ComboboxPopover>\r\n    </Combobox>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}