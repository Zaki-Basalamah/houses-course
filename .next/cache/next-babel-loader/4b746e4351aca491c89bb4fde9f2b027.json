{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _taggedTemplateLiteral from \"@babel/runtime/helpers/esm/taggedTemplateLiteral\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\Windows\\\\Desktop\\\\housestreetcourse\\\\house-course\\\\pages\\\\index.tsx\",\n    _s = $RefreshSig$();\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n  query HousesQuery($bounds: BoundsInput!) {\\n    houses(bounds: $bounds) {\\n      id\\n      latitude\\n      longitude\\n      address\\n      publicId\\n      bedrooms\\n    }\\n  }\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport { useState } from \"react\";\nimport { useQuery, gql } from \"@apollo/client\";\nimport { useDebounce } from \"use-debounce\";\nimport Layout from \"src/components/layout\";\nimport Map from \"src/components/map\";\nimport HouseList from \"src/components/houseList\";\nimport { useLastData } from \"src/utils/useLastData\";\nimport { useLocalState } from \"src/utils/useLocalState\";\nvar HOUSES_QUERY = gql(_templateObject());\n\nvar parseBounds = function parseBounds(boundsString) {\n  var bounds = JSON.parse(boundsString);\n  return {\n    sw: {\n      latitude: bounds[0][1],\n      longitude: bounds[0][0]\n    },\n    ne: {\n      latitude: bounds[1][1],\n      longitude: bounds[1][0]\n    }\n  };\n};\n\nexport default function Home() {\n  _s();\n\n  var _useState = useState(null),\n      highlightedId = _useState[0],\n      setHighlightedId = _useState[1];\n\n  var _useLocalState = useLocalState(\"bounds\", \"[[0,0],[0,0]]\"),\n      _useLocalState2 = _slicedToArray(_useLocalState, 2),\n      dataBounds = _useLocalState2[0],\n      setDataBounds = _useLocalState2[1];\n\n  var _useDebounce = useDebounce(dataBounds, 200),\n      _useDebounce2 = _slicedToArray(_useDebounce, 1),\n      debouncedDataBounds = _useDebounce2[0];\n\n  var _useQuery = useQuery(HOUSES_QUERY, {\n    variables: {\n      bounds: parseBounds(debouncedDataBounds)\n    }\n  }),\n      data = _useQuery.data,\n      error = _useQuery.error;\n\n  var lastData = useLastData(data);\n  if (error) return /*#__PURE__*/_jsxDEV(Layout, {\n    main: /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"Error loading houses\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 35\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 55,\n    columnNumber: 21\n  }, this);\n  return /*#__PURE__*/_jsxDEV(Layout, {\n    main: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"w-1/2 pb-4\",\n        style: {\n          maxHeight: \"calc(100vh - 64px)\",\n          overflowX: \"scroll\"\n        },\n        children: /*#__PURE__*/_jsxDEV(HouseList, {\n          houses: lastData ? lastData.houses : [],\n          setHighlightedId: setHighlightedId\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"w-1/2\",\n        children: /*#__PURE__*/_jsxDEV(Map, {\n          setDataBounds: setDataBounds,\n          houses: lastData ? lastData.houses : [],\n          highlightedId: highlightedId\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 58,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Home, \"+jzjbs4QiQAdyBQNklGGWjuOnzc=\", false, function () {\n  return [useLocalState, useDebounce, useQuery, useLastData];\n});\n\n_c = Home;\n\nvar _c;\n\n$RefreshReg$(_c, \"Home\");","map":{"version":3,"sources":["C:/Users/Windows/Desktop/housestreetcourse/house-course/pages/index.tsx"],"names":["useState","useQuery","gql","useDebounce","Layout","Map","HouseList","useLastData","useLocalState","HOUSES_QUERY","parseBounds","boundsString","bounds","JSON","parse","sw","latitude","longitude","ne","Home","highlightedId","setHighlightedId","dataBounds","setDataBounds","debouncedDataBounds","variables","data","error","lastData","maxHeight","overflowX","houses"],"mappings":";;;;;;;;;;;;;;;;;AAAA,SAASA,QAAT,QAAyB,OAAzB;AACA,SAASC,QAAT,EAAmBC,GAAnB,QAA8B,gBAA9B;AACA,SAASC,WAAT,QAA4B,cAA5B;AACA,OAAOC,MAAP,MAAmB,uBAAnB;AACA,OAAOC,GAAP,MAAgB,oBAAhB;AACA,OAAOC,SAAP,MAAsB,0BAAtB;AACA,SAASC,WAAT,QAA4B,uBAA5B;AACA,SAASC,aAAT,QAA8B,yBAA9B;AAGA,IAAMC,YAAY,GAAGP,GAAH,mBAAlB;;AAeA,IAAMQ,WAAW,GAAG,SAAdA,WAAc,CAACC,YAAD,EAA0B;AAC5C,MAAMC,MAAM,GAAGC,IAAI,CAACC,KAAL,CAAWH,YAAX,CAAf;AACA,SAAO;AACLI,IAAAA,EAAE,EAAE;AACFC,MAAAA,QAAQ,EAAEJ,MAAM,CAAC,CAAD,CAAN,CAAU,CAAV,CADR;AAEFK,MAAAA,SAAS,EAAEL,MAAM,CAAC,CAAD,CAAN,CAAU,CAAV;AAFT,KADC;AAKLM,IAAAA,EAAE,EAAE;AACFF,MAAAA,QAAQ,EAAEJ,MAAM,CAAC,CAAD,CAAN,CAAU,CAAV,CADR;AAEFK,MAAAA,SAAS,EAAEL,MAAM,CAAC,CAAD,CAAN,CAAU,CAAV;AAFT;AALC,GAAP;AAUD,CAZD;;AAcA,eAAe,SAASO,IAAT,GAAgB;AAAA;;AAAA,kBACanB,QAAQ,CAAgB,IAAhB,CADrB;AAAA,MACtBoB,aADsB;AAAA,MACPC,gBADO;;AAAA,uBAEOb,aAAa,CAC/C,QAD+C,EAE/C,eAF+C,CAFpB;AAAA;AAAA,MAEtBc,UAFsB;AAAA,MAEVC,aAFU;;AAAA,qBAMCpB,WAAW,CAACmB,UAAD,EAAa,GAAb,CANZ;AAAA;AAAA,MAMtBE,mBANsB;;AAAA,kBAOLvB,QAAQ,CAC9BQ,YAD8B,EAE9B;AACEgB,IAAAA,SAAS,EAAE;AAAEb,MAAAA,MAAM,EAAEF,WAAW,CAACc,mBAAD;AAArB;AADb,GAF8B,CAPH;AAAA,MAOrBE,IAPqB,aAOrBA,IAPqB;AAAA,MAOfC,KAPe,aAOfA,KAPe;;AAa7B,MAAMC,QAAQ,GAAGrB,WAAW,CAACmB,IAAD,CAA5B;AAEA,MAAIC,KAAJ,EAAW,oBAAO,QAAC,MAAD;AAAQ,IAAA,IAAI,eAAE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAd;AAAA;AAAA;AAAA;AAAA,UAAP;AAEX,sBACE,QAAC,MAAD;AACE,IAAA,IAAI,eACF;AAAK,MAAA,SAAS,EAAC,MAAf;AAAA,8BACE;AACE,QAAA,SAAS,EAAC,YADZ;AAEE,QAAA,KAAK,EAAE;AAAEE,UAAAA,SAAS,EAAE,oBAAb;AAAmCC,UAAAA,SAAS,EAAE;AAA9C,SAFT;AAAA,+BAIE,QAAC,SAAD;AACE,UAAA,MAAM,EAAEF,QAAQ,GAAGA,QAAQ,CAACG,MAAZ,GAAqB,EADvC;AAEE,UAAA,gBAAgB,EAAEV;AAFpB;AAAA;AAAA;AAAA;AAAA;AAJF;AAAA;AAAA;AAAA;AAAA,cADF,eAUE;AAAK,QAAA,SAAS,EAAC,OAAf;AAAA,+BACE,QAAC,GAAD;AACE,UAAA,aAAa,EAAEE,aADjB;AAEE,UAAA,MAAM,EAAEK,QAAQ,GAAGA,QAAQ,CAACG,MAAZ,GAAqB,EAFvC;AAGE,UAAA,aAAa,EAAEX;AAHjB;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,cAVF;AAAA;AAAA;AAAA;AAAA;AAAA;AAFJ;AAAA;AAAA;AAAA;AAAA,UADF;AAwBD;;GAzCuBD,I;UAEcX,a,EAINL,W,EACNF,Q,EAMPM,W;;;KAbKY,I","sourcesContent":["import { useState } from \"react\";\r\nimport { useQuery, gql } from \"@apollo/client\";\r\nimport { useDebounce } from \"use-debounce\";\r\nimport Layout from \"src/components/layout\";\r\nimport Map from \"src/components/map\";\r\nimport HouseList from \"src/components/houseList\";\r\nimport { useLastData } from \"src/utils/useLastData\";\r\nimport { useLocalState } from \"src/utils/useLocalState\";\r\nimport { HousesQuery, HousesQueryVariables } from \"src/generated/HousesQuery\";\r\n\r\nconst HOUSES_QUERY = gql`\r\n  query HousesQuery($bounds: BoundsInput!) {\r\n    houses(bounds: $bounds) {\r\n      id\r\n      latitude\r\n      longitude\r\n      address\r\n      publicId\r\n      bedrooms\r\n    }\r\n  }\r\n`;\r\n\r\ntype BoundsArray = [[number, number], [number, number]];\r\n\r\nconst parseBounds = (boundsString: string) => {\r\n  const bounds = JSON.parse(boundsString) as BoundsArray;\r\n  return {\r\n    sw: {\r\n      latitude: bounds[0][1],\r\n      longitude: bounds[0][0],\r\n    },\r\n    ne: {\r\n      latitude: bounds[1][1],\r\n      longitude: bounds[1][0],\r\n    },\r\n  };\r\n};\r\n\r\nexport default function Home() {\r\n  const [highlightedId, setHighlightedId] = useState<string | null>(null);\r\n  const [dataBounds, setDataBounds] = useLocalState<string>(\r\n    \"bounds\",\r\n    \"[[0,0],[0,0]]\"\r\n  );\r\n  const [debouncedDataBounds] = useDebounce(dataBounds, 200);\r\n  const { data, error } = useQuery<HousesQuery, HousesQueryVariables>(\r\n    HOUSES_QUERY,\r\n    {\r\n      variables: { bounds: parseBounds(debouncedDataBounds) },\r\n    }\r\n  );\r\n  const lastData = useLastData(data);\r\n\r\n  if (error) return <Layout main={<div>Error loading houses</div>} />;\r\n\r\n  return (\r\n    <Layout\r\n      main={\r\n        <div className=\"flex\">\r\n          <div\r\n            className=\"w-1/2 pb-4\"\r\n            style={{ maxHeight: \"calc(100vh - 64px)\", overflowX: \"scroll\" }}\r\n          >\r\n            <HouseList\r\n              houses={lastData ? lastData.houses : []}\r\n              setHighlightedId={setHighlightedId}\r\n            />\r\n          </div>\r\n          <div className=\"w-1/2\">\r\n            <Map\r\n              setDataBounds={setDataBounds}\r\n              houses={lastData ? lastData.houses : []}\r\n              highlightedId={highlightedId}\r\n            />\r\n          </div>\r\n        </div>\r\n      }\r\n    />\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}