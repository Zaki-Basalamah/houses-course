{"ast":null,"code":"import \"reflect-metadata\";\nimport { ApolloServer } from \"apollo-server-micro\";\nimport { schema } from \"src/schema\";\nimport { prisma } from \"src/prisma\";\nimport { loadIdToken } from \"src/auth/firebaseAdmin\";\nconst server = new ApolloServer({\n  schema,\n  context: async ({\n    req\n  }) => {\n    const uid = await loadIdToken(req);\n    return {\n      uid,\n      prisma\n    };\n  },\n  tracing: true\n});\nconst handler = server.createHandler({\n  path: \"/api/graphql\"\n});\nexport const config = {\n  api: {\n    bodyParser: false\n  }\n};\nexport default handler;","map":{"version":3,"sources":["C:/Users/Windows/Desktop/housestreetcourse/house-course/pages/api/graphql.ts"],"names":["ApolloServer","schema","prisma","loadIdToken","server","context","req","uid","tracing","handler","createHandler","path","config","api","bodyParser"],"mappings":"AAAA,OAAO,kBAAP;AAEA,SAASA,YAAT,QAA6B,qBAA7B;AACA,SAASC,MAAT,QAAuB,YAAvB;AAEA,SAASC,MAAT,QAAuB,YAAvB;AACA,SAASC,WAAT,QAA4B,wBAA5B;AAEA,MAAMC,MAAM,GAAG,IAAIJ,YAAJ,CAAiB;AAC9BC,EAAAA,MAD8B;AAE9BI,EAAAA,OAAO,EAAE,OAAO;AAAEC,IAAAA;AAAF,GAAP,KAA8D;AACrE,UAAMC,GAAG,GAAG,MAAMJ,WAAW,CAACG,GAAD,CAA7B;AAEA,WAAO;AACLC,MAAAA,GADK;AAELL,MAAAA;AAFK,KAAP;AAID,GAT6B;AAU9BM,EAAAA,OAAO;AAVuB,CAAjB,CAAf;AAaA,MAAMC,OAAO,GAAGL,MAAM,CAACM,aAAP,CAAqB;AAAEC,EAAAA,IAAI,EAAE;AAAR,CAArB,CAAhB;AAEA,OAAO,MAAMC,MAAM,GAAG;AACpBC,EAAAA,GAAG,EAAE;AACHC,IAAAA,UAAU,EAAE;AADT;AADe,CAAf;AAMP,eAAeL,OAAf","sourcesContent":["import \"reflect-metadata\";\r\nimport { NextApiRequest } from \"next\";\r\nimport { ApolloServer } from \"apollo-server-micro\";\r\nimport { schema } from \"src/schema\";\r\nimport { Context } from \"src/schema/context\";\r\nimport { prisma } from \"src/prisma\";\r\nimport { loadIdToken } from \"src/auth/firebaseAdmin\";\r\n\r\nconst server = new ApolloServer({\r\n  schema,\r\n  context: async ({ req }: { req: NextApiRequest }): Promise<Context> => {\r\n    const uid = await loadIdToken(req);\r\n\r\n    return {\r\n      uid,\r\n      prisma,\r\n    };\r\n  },\r\n  tracing: process.env.NODE_ENV === \"development\",\r\n});\r\n\r\nconst handler = server.createHandler({ path: \"/api/graphql\" });\r\n\r\nexport const config = {\r\n  api: {\r\n    bodyParser: false,\r\n  },\r\n};\r\n\r\nexport default handler;\r\n"]},"metadata":{},"sourceType":"module"}